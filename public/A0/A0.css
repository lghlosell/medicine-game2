body{
    background-image: url('../../assets/img/clean.png');
    background-size: cover;
    width: 100vw;
    height: 100vh;
    padding: 0;
    margin: 0;
    overflow: hidden;
    position: relative;
    font-family: "KaiTi", "STKaiti", "SimSun", serif;
}

.intro-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: black;
    color: #f0f0f0;
    z-index: 1000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.intro-text {
    writing-mode: vertical-rl;
    text-orientation: upright;
    height: 70vh;
    font-size: 1.8rem;
    line-height: 2.5;
    letter-spacing: 0.3rem;
    animation: fadeIn 3s ease-in;
}

.intro-text p {
    margin: 0 1rem;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
}

.continue-btn {
    position: absolute;
    bottom: 20px;
    right: 20px;
    font-size: 1.5rem;
    color: rgba(255, 255, 255, 0.7);
    cursor: pointer;
    border: 1px solid rgba(255, 255, 255, 0.5);
    padding: 10px 20px;
    border-radius: 5px;
    transition: all 0.3s ease;
    animation: fadeIn 3s ease-in;
    z-index: 2000; /* Ensure it's above other elements */
}

.click-hint {
    position: absolute;
    bottom: 30px;
    right: 30px;
    font-size: 1.2rem;
    color: rgba(255, 255, 255, 0.6);
    animation: pulse 2s infinite ease-in-out;
    letter-spacing: 2px;
}

@keyframes pulse {
    0% { opacity: 0.4; }
    50% { opacity: 0.8; }
    100% { opacity: 0.4; }
}

#next-chapter-btn {
    /* Specific styles for the second continue button if needed, otherwise it inherits .continue-btn */
    /* Adjust color for readability on non-black backgrounds */
    color: #3e2723;
    border-color: #3e2723;
    background-color: rgba(255, 255, 255, 0.3);
}

#next-chapter-btn:hover {
    color: #fff;
    background-color: #5d4037;
    border-color: #5d4037;
}

.continue-btn:hover {
    color: #fff;
    border-color: #fff;
    background-color: rgba(255, 255, 255, 0.1);
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.scene-interaction {
    position: absolute;
    top: 46%; /* Estimated position based on the image */
    left: 58%; /* Estimated position based on the image */
    transform: translate(-50%, -50%);
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.click-area {
    width: 60px;
    height: 40px;
    border: 3px solid rgba(255, 255, 0, 0.7); /* Yellow highlight circle */
    border-radius: 50%;
    cursor: pointer;
    background-color: rgba(255, 255, 0, 0.1);
    box-shadow: 0 0 10px rgba(255, 255, 0, 0.5);
    animation: glow 1.5s infinite alternate;
}

@keyframes glow {
    from {
        box-shadow: 0 0 10px rgba(255, 255, 0, 0.5);
    }
    to {
        box-shadow: 0 0 20px rgba(255, 255, 0, 0.9), 0 0 10px rgba(255, 255, 0, 0.5) inset;
    }
}

.arrow-down {
    width: 0; 
    height: 0; 
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 15px solid rgba(255, 255, 0, 0.9);
    margin-bottom: 5px;
    animation: bounce 1s infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

.ancient-book-text {
    position: absolute;
    top: 50%;
    left: 15%; /* Moved to left side */
    transform: translateY(-50%); /* Removed translateX to position from left */
    width: auto; /* Width auto for vertical text */
    height: 70vh; /* Fixed height for vertical text */
    background-color: transparent; /* Removed background box per request implication or kept minimal? User said "text placed on left", usually implies no big box or transparent. Let's keep it legible but maybe less intrusive or just vertical. User screenshot had a box. I will keep the box but vertical. */
    /* Let's try to match the style but vertical */
    background-color: rgba(255, 253, 231, 0.9);
    padding: 30px 20px;
    border-radius: 5px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    font-size: 1.4rem;
    line-height: 2;
    color: #3e2723;
    border: 1px solid #d7ccc8;
    display: none;
    z-index: 100;
    
    /* Vertical Text Settings */
    writing-mode: vertical-rl;
    text-orientation: upright;
}

.ancient-book-text p {
    text-indent: 0; /* Remove indent for vertical usually looks better or keep it. */
    margin: 0 10px; /* Adjust margin for vertical columns */
}

/* Remove next-chapter-btn styles or just hide it in HTML. I will keep class generic but override ID specific if needed, but since I am deleting it from HTML, this is fine. */
#next-chapter-btn {
    display: none !important;
}

/* Transition Screen Styles */
.transition-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: black;
    color: #f0f0f0;
    z-index: 2000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.transition-text {
    width: 70%;
    text-align: center;
    font-size: 1.6rem;
    line-height: 2;
    animation: fadeIn 2s ease-in;
}

.transition-text p {
    margin-bottom: 1.5rem;
}

/* Dialog Styles */
.dialog-container {
    position: absolute;
    bottom: 5%;
    left: 50%;
    transform: translateX(-50%);
    width: 65%;
    z-index: 50;
    display: flex;
    align-items: center;
    flex-direction: column;
    gap: 15px;
}
.ready-btn-container{
    width: 100%;
    display: flex;
    justify-content: center;
}
.dialog-bubble {
    padding: 10px 20px;
    border-radius: 15px;
    font-size: 1.8rem;
    font-weight: bold;
    line-height: 1.6;
    max-width: 100%;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    position: relative;
    animation: slideUp 0.5s ease-out;
}

.apprentice-bubble {
    background-color: rgba(255, 255, 255, 0.9);
    color: #333;
    align-self: flex-end; /* Align to right */
    border-bottom-right-radius: 0;
    margin-bottom: 20px;
}

.master-bubble {
    background-color: rgba(62, 39, 35, 0.9); /* Dark brown */
    color: #fff;
    align-self: flex-start; /* Align to left */
    border-bottom-left-radius: 0;
}

@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

/* Book Icon */
.book-icon {
    position: absolute;
    top: 20px;
    right: 20px;
    font-size: 3rem;
    cursor: pointer;
    z-index: 100;
    filter: drop-shadow(0 0 5px rgba(255,255,255,0.8));
    transition: transform 0.3s ease;
    animation: float 3s ease-in-out infinite;
}

.book-icon:hover {
    transform: scale(1.1);
}

@keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}

/* Book Popup Overlay */
.book-popup-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background-color: rgba(0,0,0,0.7);
    z-index: 3000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.ancient-book-popup {
    width: 70%;
    max-height: 80vh;
    background-color: #fffde7;
    padding: 40px;
    border-radius: 10px;
    position: relative;
    box-shadow: 0 0 30px rgba(0,0,0,0.8);
    overflow-y: auto;
}

/* Mobile Adaptation */
@media (max-width: 768px) {
    .intro-text {
        font-size: 1.2rem;
        height: 85vh;
        line-height: 2;
        letter-spacing: 0.1rem;
    }
    
    .intro-text p {
        margin: 0 0.5rem;
    }

    .ancient-book-text {
        font-size: 1.2rem;
        padding: 20px 10px;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 85%;
        height: 60vh;
        /* Keep vertical but ensure it fits */
    }

    .transition-text {
        width: 90%;
        font-size: 1.2rem;
    }

    .dialog-container {
        width: 95%;
        bottom: 2%;
    }

    .dialog-bubble {
        font-size: 1rem;
        padding: 8px 15px;
        margin-bottom: 10px;
    }
    
    .ready-btn {
        padding: 10px 30px;
        font-size: 1.2rem;
    }

    .book-icon {
        font-size: 2rem;
        top: 10px;
        right: 10px;
    }

    .ancient-book-popup {
        width: 90%;
        padding: 20px;
        max-height: 70vh;
    }
    
    .book-content {
        font-size: 1rem;
        line-height: 1.6;
    }
}

.close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 2rem;
    cursor: pointer;
    color: #5d4037;
    font-weight: bold;
}

.close-btn:hover {
    color: #3e2723;
}

.book-content {
    font-size: 1.4rem;
    line-height: 1.8;
    color: #3e2723;
}

.book-content p {
    text-indent: 2em;
    margin-bottom: 1em;
}

.ready-btn {
    /* Removed absolute positioning to let it flow in flex container */
    align-self: center; /* Center horizontally in flex column */
    margin-top: 10px; /* Space above button */
    padding: 15px 40px;
    font-size: 1.5rem;
    background-color: #3e2723;
    color: #fff;
    text-decoration: none;
    border-radius: 30px;
    border: 2px solid #8d6e63;
    box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    transition: all 0.3s ease;
    z-index: 100;
    animation: fadeIn 1s ease-in;
}

.ready-btn:hover {
    background-color: #5d4037;
    transform: scale(1.05);
}

/* Return to Previous Level Button */
.back-btn {
    position: absolute;
    bottom: 20px;
    left: 20px;
    padding: 10px 20px;
    font-size: 1.2rem;
    background-color: rgba(62, 39, 35, 0.8);
    color: #fff;
    border: 2px solid #fff;
    border-radius: 8px;
    cursor: pointer;
    z-index: 2000;
    font-family: "KaiTi", "STKaiti", "SimSun", serif;
    transition: all 0.3s ease;
    text-decoration: none;
    display: flex;
    justify-content: center;
    align-items: center;
}

.back-btn:hover {
    background-color: rgba(93, 64, 55, 1);
    transform: scale(1.05);
}

/* Mobile Portrait Orientation Prompt */
@media screen and (orientation: portrait) and (max-width: 1024px) {
    body::after {
        content: "Ϊ�˸��õ�����\A�뽫�ֻ���ת������";
        white-space: pre-wrap;
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: #3e2723;
        color: #fff;
        z-index: 99999;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        font-weight: bold;
        text-align: center;
        font-family: "KaiTi", "STKaiti", serif;
        line-height: 1.5;
        pointer-events: none; /* Allows scrolling if needed, but blocks clicks visually */
    }
    
    /* Hide game interactive elements to prevent accidental clicks */
    body > *:not(script):not(style) {
        visibility: hidden;
    }
    
    /* Ensure the prompt itself is visible (body::after is part of body, so we hide children, not body itself) */
    /* Note: visibility:hidden on children works well */
}

/* Override Mobile Portrait Lock */
@media screen and (orientation: portrait) and (max-width: 1024px) {
    body::after {
        display: none !important;
        content: none !important;
    }
    body > *:not(script):not(style) {
        visibility: visible !important;
    }
}

/* =========================================
   Mobile Landscape Adaptation (Universal)
   ========================================= */
@media screen and (max-height: 600px) and (orientation: landscape) {
    /* Global Font Adjustment */
    html {
        font-size: 10px !important; /* Reduced base font size */
    }

    /* Intro Screen Adjustments */
    .intro-text, .narrative-text {
        font-size: 1.4rem !important;
        line-height: 1.6 !important;
        width: 85% !important; /* Reduced width for better margins */
        max-width: none !important;
        writing-mode: horizontal-tb !important; /* Force horizontal text */
        height: auto !important;
        text-orientation: mixed !important;
        display: block !important;
        margin: 0 auto !important; /* Center block */
    }

    .intro-text p {
        margin: 8px 0 !important;
        text-indent: 2em !important;
        text-align: justify !important; /* Justify text for neatness */
    }

    /* Ancient Book Text & Popup */
    .ancient-book-text {
        writing-mode: horizontal-tb !important;
        text-orientation: mixed !important;
        width: 90% !important;
        height: auto !important;
        max-height: 80vh !important;
        left: 50% !important;
        top: 50% !important;
        transform: translate(-50%, -50%) !important;
        padding: 15px !important;
        overflow-y: auto !important;
        background-color: rgba(255, 253, 231, 0.95) !important;
    }
    
    .ancient-book-text p {
        margin: 5px 0 !important;
        text-indent: 2em !important;
    }

    .ancient-book-popup {
        width: 95% !important;
        max-height: 90vh !important;
        padding: 15px !important;
    }

    .book-content {
        font-size: 1.1rem !important;
        line-height: 1.4 !important;
    }

    .continue-hint {
        bottom: 5px !important;
        right: 5px !important;
        font-size: 0.9rem !important;
    }

    /* Dialog/Question Area */
    .dialog-container, .question-dialog, .intro-box {
        bottom: 2px !important;
        width: 98% !important;
        padding: 4px !important;
        max-height: 55vh !important;
        overflow-y: auto !important;
    }
    
    /* Target both p inside bubbles and raw dialog content */
    .dialog-bubble p, .dialog-content p, .dialog-content {
        font-size: 1.1rem !important;
        line-height: 1.2 !important;
        margin: 2px 0 !important;
    }

    /* Options/Choices */
    .options-container {
        bottom: 2px !important;
        flex-wrap: wrap !important;
        justify-content: center !important;
        width: 100% !important;
        gap: 3px !important;
    }

    .option-card {
        padding: 2px 5px !important;
        font-size: 1rem !important;
        margin: 2px !important;
        width: auto !important;
        min-width: 60px !important;
        flex: 1 1 25% !important;
    }

    /* Buttons */
    .back-btn {
        top: 2px !important;
        bottom: auto !important;
        left: 2px !important;
        padding: 2px 6px !important;
        font-size: 0.9rem !important;
    }

    .next-level-btn, .confirm-btn, .continue-btn {
        bottom: 2px !important;
        right: 2px !important;
        padding: 4px 10px !important;
        font-size: 1rem !important;
    }

    /* Tools/Books */
    .game-toolbar {
        top: 2px !important;
        right: 2px !important;
        flex-direction: row !important;
    }

    .tool-item {
        width: 30px !important;
        height: 30px !important;
        font-size: 1.2rem !important;
        margin: 0 2px !important;
    }

    /* Popups (Book/Hint) */
    .ancient-book-popup, .popup-content {
        width: 98% !important;
        height: 98% !important;
        padding: 5px !important;
        max-width: none !important;
    }
    
    .book-text p {
        font-size: 1.1rem !important;
        line-height: 1.2 !important;
    }
}
