<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çœŸæ­¦æ±¤Â·é™„å­å¥‡ç¼˜</title>
    <link rel="stylesheet" href="A2.css"></link>

</head>
<body>
    <!-- Level Name -->
    <div class="level-name">å…³å¡äºŒ.ç”Ÿç†Ÿä¹‹å¼‚</div>
    <!-- Location Name -->
    <div class="location-name">è¯ç†å ‚</div>

    <!-- Master's Question -->
    <div class="question-dialog" id="question-dialog">
        <div class="dialog-content">
            <p>â€œæ—¢çŸ¥ç”¨ç†Ÿé™„å­ï¼Œå¯çŸ¥ç”Ÿã€ç†Ÿé™„å­åŠŸæ•ˆæœ‰ä½•ä¸åŒï¼Ÿâ€</p>
        </div>
    </div>

    <!-- Options -->
    <div class="options-container">
        <div class="option-btn" onclick="selectOption('A')">ç”Ÿé™„å­è¯æ€§å³»çŒ›ï¼Œåäºå›é˜³æ•‘é€†</div>
        <div class="option-btn" onclick="selectOption('B')">ç†Ÿé™„å­åäºæ¸©è¡¥å‘½é—¨ä¹‹ç«</div>
        <div class="option-btn" onclick="selectOption('C')">ä¸Šè¿°éƒ½ä¸å¯¹</div>
    </div>

    <!-- Right Toolbar -->
    <div class="game-toolbar">
        <div class="tool-item" onclick="showBook()" title="æŸ¥çœ‹ç»æ–‡">
            ğŸ“–
        </div>
        <div class="tool-item" onclick="showHint()" title="æŸ¥çœ‹æç¤º">
            ğŸ”
        </div>
    </div>

    <!-- Book Popup -->
    <div class="popup-overlay" id="book-popup" style="display: none;" onclick="hideBook()">
        <div class="popup-content book-style" onclick="event.stopPropagation()">
            <div class="close-btn" onclick="hideBook()">Ã—</div>
            <div class="book-pages">
                <!-- Page 1: Scripture -->
                <div class="book-page" id="book-page-1">
                    <div class="book-text">
                        <p>â€œå¤ªé˜³ç—…ï¼Œå‘æ±—ï¼Œæ±—å‡ºä¸è§£ï¼Œå…¶äººä»å‘çƒ­ï¼Œå¿ƒä¸‹æ‚¸ï¼Œå¤´çœ©ï¼Œèº«ç¤åŠ¨ï¼ŒæŒ¯æŒ¯æ¬²æ“—åœ°è€…ï¼Œ<span class="highlight-red">çœŸæ­¦æ±¤</span>ä¸»ä¹‹ã€‚â€</p>
                        <p>â€œå°‘é˜´ç—…ï¼ŒäºŒä¸‰æ—¥ä¸å·²ï¼Œè‡³å››äº”æ—¥ï¼Œè…¹ç—›ï¼Œå°ä¾¿ä¸åˆ©ï¼Œå››è‚¢æ²‰é‡ç–¼ç—›ï¼Œè‡ªä¸‹åˆ©è€…ï¼Œæ­¤ä¸ºæœ‰æ°´æ°”ã€‚å…¶äººæˆ–å’³ï¼Œæˆ–å°ä¾¿åˆ©ï¼Œæˆ–ä¸‹åˆ©ï¼Œæˆ–å‘•è€…ï¼Œ<span class="highlight-red">çœŸæ­¦æ±¤</span>ä¸»ä¹‹ã€‚â€</p>
                    </div>
                </div>
                <!-- Page 2: A1 Content -->
                <div class="book-page" id="book-page-2" style="display: none;">
                    <div class="book-text">
                        <p>ç”Ÿé™„å­ï¼Œå‘ˆä¹Œé»‘ä¹‹è‰²ï¼Œå¸¦ç€ç²—ç³™çš„å¤–çš®ï¼Œå½¢çŠ¶ä¸è§„åˆ™ï¼Œå‡‘è¿‘èƒ½é—»åˆ°ä¸€è‚¡è½»å¾®çš„è¾›è¾£è…¥æ°”ï¼›ç†Ÿé™„å­ï¼Œæ˜¯é»„ç™½è‰²çš„åˆ‡ç‰‡ï¼Œè´¨åœ°æ¸©æ¶¦ï¼Œè¡¨é¢å…‰æ»‘ï¼Œæ•£å‘ç€æ·¡æ·¡çš„è¯é¦™ã€‚</p>
                        <p>ç”Ÿé™„å­æ¯’æ€§çŒ›çƒˆï¼Œå¤šç”¨äºå›é˜³æ•‘é€†ä¹‹æ€¥æ•‘ï¼Œä¸åˆé€‚çœŸæ­¦æ±¤ã€‚ç†Ÿé™„å­ç»ç‚®åˆ¶ï¼Œæ¯’æ€§å¤§å‡ï¼Œè¯æ€§æ¸©ç…¦æŒä¹…ï¼Œæ­£åˆçœŸæ­¦æ±¤æ¸©é˜³åˆ©æ°´ä¹‹éœ€ã€‚</p>
                    </div>
                </div>
                <!-- Page 3: A2 Content -->
                <div class="book-page" id="book-page-3" style="display: none;">
                    <div class="book-text">
                        <p>ç”Ÿé™„å­å›é˜³æ•‘é€†ï¼Œç†Ÿé™„å­æ¸©è¡¥å‘½é—¨ï¼ŒäºŒè€…å„æœ‰æ‰€é•¿</p>
                    </div>
                </div>
            </div>
            <!-- Pagination Controls -->
            <div class="book-pagination" id="book-pagination" style="display: flex;">
                <button class="page-btn" id="prev-btn" onclick="changePage(-1)" disabled>ä¸Šä¸€é¡µ</button>
                <span class="page-indicator" id="page-indicator">1 / 2</span>
                <button class="page-btn" id="next-btn" onclick="changePage(1)">ä¸‹ä¸€é¡µ</button>
            </div>
        </div>
    </div>

    <!-- Next Level Button -->
    <div class="next-level-btn" id="next-level-btn" onclick="nextLevel()" style="display: none;">ä¸‹ä¸€å…³</div>

    <script>
        // Track selected options
        let selectedOptions = new Set();
        let currentPage = 1;
        let totalPages = 2; // Initially 2 pages (from A1) are unlocked

        function selectOption(option) {
            const dialogContent = document.querySelector('#question-dialog .dialog-content p');
            const options = document.querySelectorAll('.option-btn');
            
            // Get button element
            let btn;
            if (option === 'A') btn = options[0];
            if (option === 'B') btn = options[1];
            if (option === 'C') btn = options[2];

            // Toggle selection logic
            if (option === 'C') {
                // If C is clicked, it's incorrect
                btn.classList.add('option-incorrect');
                dialogContent.textContent = "â€œéä¹Ÿï¼Œéä¹Ÿã€‚ç”Ÿç†Ÿé™„å­åŠŸæ•ˆç¡®æœ‰ä¸åŒï¼Œéœ€ç»†ç»†ä½“ä¼šã€‚â€";
                // Reset other selections if C is clicked? Or just show error?
                // Let's keep A/B selected if they were, but mark C as wrong.
                setTimeout(() => {
                    btn.classList.remove('option-incorrect'); // Remove error style after a moment
                }, 1000);
            } else {
                // If A or B is clicked
                if (!selectedOptions.has(option)) {
                    selectedOptions.add(option);
                    btn.classList.add('option-correct');
                }
                
                // Check if both A and B are selected
                if (selectedOptions.has('A') && selectedOptions.has('B')) {
                    dialogContent.textContent = "â€œå­ºå­å¯æ•™ä¹Ÿï¼ç”Ÿé™„å­å›é˜³æ•‘é€†ï¼Œç†Ÿé™„å­æ¸©è¡¥å‘½é—¨ï¼ŒäºŒè€…å„æœ‰æ‰€é•¿ã€‚éšä¸ºå¸ˆæ¥ç¬¬ä¸‰å…³å§â€";
                    
                    // Show next level button
                    document.getElementById('next-level-btn').style.display = 'block';

                    // Unlock 3rd page in book
                    if (totalPages < 3) {
                        totalPages = 3;
                        updatePagination();
                        // Optional: Show notification on book icon
                        const bookIcon = document.querySelector('.tool-item[title="æŸ¥çœ‹ç»æ–‡"]');
                        bookIcon.style.position = 'relative';
                        const dot = document.createElement('div');
                        dot.style.cssText = "position: absolute; top: 0; right: 0; width: 10px; height: 10px; background: red; border-radius: 50%;";
                        bookIcon.appendChild(dot);
                    }
                } else if (selectedOptions.has('A')) {
                    dialogContent.textContent = "â€œä¸é”™ï¼Œç”Ÿé™„å­ç¡®æœ‰å›é˜³æ•‘é€†ä¹‹åŠŸï¼Œé‚£ç†Ÿé™„å­å‘¢ï¼Ÿâ€";
                } else if (selectedOptions.has('B')) {
                    dialogContent.textContent = "â€œç„¶ä¹Ÿï¼Œç†Ÿé™„å­æ“…è¡¥å‘½é—¨ä¹‹ç«ï¼Œé‚£ç”Ÿé™„å­å‘¢ï¼Ÿâ€";
                }
            }
        }

        function showBook() {
            document.getElementById('book-popup').style.display = 'flex';
            // Remove notification dot if exists
            const bookIcon = document.querySelector('.tool-item[title="æŸ¥çœ‹ç»æ–‡"]');
            if (bookIcon.lastChild.tagName === 'DIV') {
                bookIcon.removeChild(bookIcon.lastChild);
            }
        }

        function hideBook() {
            document.getElementById('book-popup').style.display = 'none';
        }

        function changePage(direction) {
            const newPage = currentPage + direction;
            if (newPage >= 1 && newPage <= totalPages) {
                currentPage = newPage;
                updatePagination();
            }
        }

        function updatePagination() {
            // Hide all pages
            document.querySelectorAll('.book-page').forEach(page => page.style.display = 'none');
            // Show current page
            document.getElementById(`book-page-${currentPage}`).style.display = 'block';
            
            // Update page indicator
            document.getElementById('page-indicator').textContent = `${currentPage} / ${totalPages}`;
            
            // Update buttons
            document.getElementById('prev-btn').disabled = currentPage === 1;
            document.getElementById('next-btn').disabled = currentPage === totalPages;
        }

        function showHint() {
            alert("æç¤ºï¼šå›é¡¾ä¸Šä¸€å…³å¸ˆçˆ¶çš„æ•™è¯²ã€‚");
        }

        function nextLevel() {
            window.location.href = '../A3/A3.html';
        }
    </script>
</body>
</html>